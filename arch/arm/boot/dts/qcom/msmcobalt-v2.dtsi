/* Copyright (c) 2016 The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/*
 * As a general rule, only version-specific property overrides should be placed
 * inside this file. Common device definitions should be placed inside the
 * msmcobalt.dtsi file.
 */

#include "msmcobalt.dtsi"

/ {
	model = "Qualcomm Technologies, Inc. MSMCOBALT v2";
	qcom,msm-id = <292 0x20000>;
};

&clock_cpu {
	qcom,pwrcl-speedbin0-v0 =
		<   300000000 0x0004000f 0x01200020 0x1 >,
		<   364800000 0x05040013 0x01200020 0x1 >,
		<   441600000 0x05040017 0x02200020 0x1 >,
		<   518400000 0x0504001b 0x02200020 0x1 >,
		<   595200000 0x0504001f 0x02200020 0x1 >,
		<   672000000 0x05040023 0x03200020 0x1 >,
		<   748800000 0x05040027 0x03200020 0x1 >,
		<   825600000 0x0404002b 0x03220022 0x1 >,
		<   883200000 0x0404002e 0x04250025 0x1 >,
		<   960000000 0x04040032 0x04280028 0x1 >,
		<  1036800000 0x04040036 0x042b002b 0x1 >,
		<  1094400000 0x04040039 0x052e002e 0x2 >,
		<  1171200000 0x0404003d 0x05310031 0x2 >,
		<  1248000000 0x04040041 0x05340034 0x2 >,
		<  1324800000 0x04040045 0x06370037 0x2 >,
		<  1401600000 0x04040049 0x063a003a 0x2 >,
		<  1478400000 0x0404004d 0x073e003e 0x2 >,
		<  1555200000 0x04040051 0x07410041 0x2 >,
		<  1670400000 0x04040057 0x08460046 0x2 >,
		<  1747200000 0x0404005b 0x08490049 0x2 >,
		<  1824000000 0x0404005f 0x084c004c 0x3 >,
		<  1900800000 0x04040063 0x094f004f 0x3 >;

	qcom,perfcl-speedbin0-v0 =
		<   300000000 0x0004000f 0x01200020 0x1 >,
		<   345600000 0x05040012 0x01200020 0x1 >,
		<   422400000 0x05040016 0x02200020 0x1 >,
		<   499200000 0x0504001a 0x02200020 0x1 >,
		<   576000000 0x0504001e 0x02200020 0x1 >,
		<   652800000 0x05040022 0x03200020 0x1 >,
		<   729600000 0x05040026 0x03200020 0x1 >,
		<   806400000 0x0504002a 0x03220022 0x1 >,
		<   902400000 0x0404002f 0x04260026 0x1 >,
		<   979200000 0x04040033 0x04290029 0x1 >,
		<  1056000000 0x04040037 0x052c002c 0x1 >,
		<  1132800000 0x0404003b 0x052f002f 0x1 >,
		<  1190400000 0x0404003e 0x05320032 0x2 >,
		<  1267200000 0x04040042 0x06350035 0x2 >,
		<  1344000000 0x04040046 0x06380038 0x2 >,
		<  1420800000 0x0404004a 0x063b003b 0x2 >,
		<  1497600000 0x0404004e 0x073e003e 0x2 >,
		<  1574400000 0x04040052 0x07420042 0x2 >,
		<  1651200000 0x04040056 0x07450045 0x2 >,
		<  1728000000 0x0404005a 0x08480048 0x2 >,
		<  1804800000 0x0404005e 0x084b004b 0x2 >,
		<  1881600000 0x04040062 0x094e004e 0x2 >,
		<  1958400000 0x04040066 0x09520052 0x2 >,
		<  2035200000 0x0404006a 0x09550055 0x3 >,
		<  2112000000 0x0404006e 0x0a580058 0x3 >,
		<  2188800000 0x04040072 0x0a5b005b 0x3 >,
		<  2265600000 0x04040076 0x0a5e005e 0x3 >,
		<  2342400000 0x0404007a 0x0a620062 0x3 >,
		<  2419200000 0x0404007e 0x0a650065 0x3 >,
		<  2496000000 0x04040082 0x0a680068 0x3 >;
};

&msm_cpufreq {
	qcom,cpufreq-table-0 =
		<   300000 >,
		<   364800 >,
		<   441600 >,
		<   518400 >,
		<   595200 >,
		<   672000 >,
		<   748800 >,
		<   825600 >,
		<   883200 >,
		<   960000 >,
		<  1036800 >,
		<  1094400 >,
		<  1171200 >,
		<  1248000 >,
		<  1324800 >,
		<  1401600 >,
		<  1478400 >,
		<  1555200 >,
		<  1670400 >,
		<  1747200 >,
		<  1824000 >,
		<  1900800 >;

	qcom,cpufreq-table-4 =
		<   300000 >,
		<   345600 >,
		<   422400 >,
		<   499200 >,
		<   576000 >,
		<   652800 >,
		<   729600 >,
		<   806400 >,
		<   902400 >,
		<   979200 >,
		<  1056000 >,
		<  1132800 >,
		<  1190400 >,
		<  1267200 >,
		<  1344000 >,
		<  1420800 >,
		<  1497600 >,
		<  1574400 >,
		<  1651200 >,
		<  1728000 >,
		<  1804800 >,
		<  1881600 >,
		<  1958400 >,
		<  2035200 >,
		<  2112000 >,
		<  2188800 >,
		<  2265600 >,
		<  2342400 >,
		<  2419200 >,
		<  2496000 >;
};

&devfreq_cpufreq {
	mincpubw-cpufreq {
		cpu-to-dev-map-0 =
			< 1900800 1525 >;
		cpu-to-dev-map-4 =
			< 2419200 1525 >,
			< 2496000 5195 >;
		};
};

&clock_gcc {
	compatible = "qcom,gcc-cobalt-v2";
};

&clock_mmss {
	compatible = "qcom,mmsscc-cobalt-v2";
};

&clock_gpu {
	compatible = "qcom,gpucc-cobalt-v2";
};

&clock_gfx {
	compatible = "qcom,gfxcc-cobalt-v2";
	qcom,gfxfreq-speedbin0 =
		<         0 0                           0 >,
		< 180000000 1 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 257000000 2 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 342000000 3 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 414000000 4 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 515000000 5 RPM_SMD_REGULATOR_LEVEL_NOM >,
		< 596000000 6 RPM_SMD_REGULATOR_LEVEL_NOM >,
		< 670000000 7 RPM_SMD_REGULATOR_LEVEL_TURBO >,
		< 710000000 8 RPM_SMD_REGULATOR_LEVEL_TURBO >;
	qcom,gfxfreq-mx-speedbin0 =
		<         0                           0 >,
		< 180000000 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 257000000 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 342000000 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 414000000 RPM_SMD_REGULATOR_LEVEL_SVS >,
		< 515000000 RPM_SMD_REGULATOR_LEVEL_NOM >,
		< 596000000 RPM_SMD_REGULATOR_LEVEL_NOM >,
		< 670000000 RPM_SMD_REGULATOR_LEVEL_TURBO >,
		< 710000000 RPM_SMD_REGULATOR_LEVEL_TURBO >;
};

&mdss_mdp {
	qcom,vbif-settings = <0x00d0 0x00002020>;
	qcom,max-bandwidth-low-kbps = <9400000>;
	qcom,max-bandwidth-high-kbps = <9400000>;
	qcom,max-bandwidth-per-pipe-kbps = <4700000>;
};

&apc0_cpr {
	compatible = "qcom,cprh-msmcobalt-v2-kbss-regulator";
};

&apc0_pwrcl_vreg {
	regulator-max-microvolt = <23>;
	qcom,cpr-corners = <22>;
	qcom,cpr-corner-fmax-map = <8 11 18 22>;

	qcom,cpr-voltage-ceiling =
		<688000  688000  688000  688000  688000
		 688000  688000  688000  756000  756000
		 756000  828000  828000  828000  828000
		 828000  828000  828000  952000  952000
		1024000 1024000>;

	qcom,cpr-voltage-floor =
		<568000  568000  568000  568000  568000
		 568000  568000  568000  568000  568000
		 568000  632000  632000  632000  632000
		 632000  632000  632000  712000  712000
		 756000  756000>;

	qcom,cpr-floor-to-ceiling-max-range =
		<55000  55000  55000  55000
		 55000  55000  55000  55000
		 55000  55000  55000  65000
		 65000  65000  65000  65000
		 65000  65000  65000  65000
		 65000  65000>;

	qcom,corner-frequencies =
		<300000000  364800000  441600000
		 518400000  595200000  672000000
		 748800000  825600000  883200000
		 960000000 1036800000 1094400000
		1171200000 1248000000 1324800000
		1401600000 1478400000 1555200000
		1670400000 1747200000 1824000000
		1900800000>;

	qcom,cpr-ro-scaling-factor =
		<4001 4019 3747 3758 3564 3480 2336
		 2247 3442 3147 2136 4156 4028 3030
		 3727 3198>,
		<4001 4019 3747 3758 3564 3480 2336
		 2247 3442 3147 2136 4156 4028 3030
		 3727 3198>,
		<3704 3601 3465 3567 3356 3473 2686
		 2773 3049 2932 2235 3816 3800 3097
		 2966 2808>,
		<2974 3092 3288 3329 2905 3096 3119
		 3225 2865 3140 2892 3592 3408 3576
		 1559 1392>;

	qcom,cpr-open-loop-voltage-fuse-adjustment =
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>,
		<40000 24000 0 0>;

	qcom,cpr-closed-loop-voltage-fuse-adjustment =
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>,
		<20000 26000 0 0>;

	qcom,allow-voltage-interpolation;
	qcom,allow-quotient-interpolation;
	qcom,cpr-scaled-open-loop-voltage-as-ceiling;
};

&apc1_cpr {
	compatible = "qcom,cprh-msmcobalt-v2-kbss-regulator";
};

&apc1_perfcl_vreg {
	regulator-max-microvolt = <31>;
	qcom,cpr-corners = <30>;
	qcom,cpr-corner-fmax-map = <8 12 20 30>;

	qcom,cpr-voltage-ceiling =
		<688000  688000  688000  688000  688000
		 688000  688000  688000  756000  756000
		 756000  756000  828000  828000  828000
		 828000  828000  828000  828000  828000
		 952000  952000  952000 1024000 1024000
		1024000 1024000 1024000 1024000 1024000>;

	qcom,cpr-voltage-floor =
		<568000  568000  568000  568000  568000
		 568000  568000  568000  568000  568000
		 568000  568000  632000  632000  632000
		 632000  632000  632000  632000  632000
		 712000  712000  712000  756000  756000
		 756000  756000  756000  756000  756000>;

	qcom,cpr-floor-to-ceiling-max-range =
		<55000  55000  55000  55000
		 55000  55000  55000  55000
		 55000  55000  55000  55000
		 65000  65000  65000  65000
		 65000  65000  65000  65000
		 65000  65000  65000  65000
		 65000  65000  65000  65000
		 65000  65000>;

	qcom,corner-frequencies =
		<300000000  345600000  422400000
		 499200000  576000000  652800000
		 729600000  806400000  902400000
		 979200000 1056000000 1132800000
		1190400000 1267200000 1344000000
		1420800000 1497600000 1574400000
		1651200000 1728000000 1804800000
		1881600000 1958400000 2035200000
		2112000000 2188800000 2265600000
		2342400000 2419200000 2496000000>;

	qcom,cpr-ro-scaling-factor =
		<4001 4019 3747 3758 3564 3480 2336
		 2247 3442 3147 2136 4156 4028 3030
		 3727 3190>,
		<4001 4019 3747 3758 3564 3480 2336
		 2247 3442 3147 2136 4156 4028 3030
		 3727 3198>,
		<3704 3601 3465 3567 3356 3473 2686
		 2773 3049 2932 2235 3816 3800 3097
		 2966 2808>,
		<2974 3092 3288 3329 2905 3096 3119
		 3225 2865 3140 2892 3592 3408 3576
		 1559 1392>;

	qcom,cpr-open-loop-voltage-fuse-adjustment =
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>,
		<8000 0 0 52000>;

	qcom,cpr-closed-loop-voltage-fuse-adjustment =
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>,
		<0 0 0 50000>;

	qcom,allow-voltage-interpolation;
	qcom,allow-quotient-interpolation;
	qcom,cpr-scaled-open-loop-voltage-as-ceiling;
};

&gfx_cpr {
	compatible = "qcom,cpr4-msmcobalt-v2-mmss-regulator";
};

&gfx_vreg {
	regulator-min-microvolt = <1>;
	regulator-max-microvolt = <8>;

	qcom,cpr-fuse-corners = <4>;
	qcom,cpr-fuse-combos = <8>;
	qcom,cpr-corners = <8>;

	qcom,cpr-corner-fmax-map = <1 3 5 8>;

	qcom,cpr-voltage-ceiling =
		<616000  676000  740000  800000  828000
		 884000  952000 1024000>;

	qcom,cpr-voltage-floor =
		<516000  516000  532000  584000  632000
		 672000  712000  756000>;

	qcom,mem-acc-voltage = <1 1 1 2 2 2 2 2>;

	qcom,corner-frequencies =
		<180000000 257000000 342000000 414000000
		 515000000 596000000 670000000 710000000>;

	qcom,cpr-target-quotients =
		<   0    0    0    0  331  357    0    0
		    0    0    0    0    0    0  115    0>,
		<   0    0    0    0  467  500    0    0
		    0    0    0    0    0    0  199    0>,
		<   0    0    0    0  628  665    0    0
		    0    0    0    0    0    0  290    0>,
		<   0    0    0    0  762  805    0    0
		    0    0    0    0    0    0  397    0>,
		<   0    0    0    0  964 1013    0    0
		    0    0 1143    0 1138 1055    0    0>,
		<   0    0    0    0    0    0    0    0
		    0    0 1306    0 1289 1168    0    0>,
		<   0    0    0    0    0    0    0    0
		    0    0 1468    0 1429 1256    0    0>,
		<   0    0    0    0    0    0    0    0
		    0    0    0    0    0 1353    0    0>;

	qcom,cpr-ro-scaling-factor =
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>,
		<   0    0    0    0 3005 3111    0    0
		    0    0 3487    0 3280 1896 1874    0>;

	qcom,cpr-open-loop-voltage-fuse-adjustment =
		<   72000        0        0        0>;

	qcom,cpr-closed-loop-voltage-adjustment =
		<   65000    26000     8000        0
			0        0        0        0>;

	qcom,cpr-floor-to-ceiling-max-range =
	       <50000 50000 50000 50000 50000 50000 70000 70000>;

	qcom,cpr-fused-closed-loop-voltage-adjustment-map =
		<0 0 1 2 3 0 0 4>;

	qcom,allow-voltage-interpolation;
	qcom,cpr-scaled-open-loop-voltage-as-ceiling;

	qcom,cpr-aging-max-voltage-adjustment = <15000>;
	qcom,cpr-aging-ref-corner = <8>;
	qcom,cpr-aging-ro-scaling-factor = <2950>;
	qcom,allow-aging-voltage-adjustment = <0>;
};

&qusb_phy0 {
	qcom,qusb-phy-init-seq =
			/* <value reg_offset> */
				<0x13 0x04
				0x7c 0x18c
				0x80 0x2c
				0x0a 0x184
				0x00 0x240
				0x19 0xb4>;
};
